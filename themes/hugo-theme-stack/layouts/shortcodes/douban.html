{{ $id := (.Get "id") }}
{{ $type := (.Get "type") }}
{{ $url := (printf "https://movie.querydata.org/api?id=%s" $id) }}
{{- $opts := dict "minify" hugo.IsProduction "JSXFactory" "createElement" -}}
{{- $doubanScript := resources.Get "ts/douban.js" | js.Build $opts -}}
<script type="text/javascript" src="{{ $doubanScript.RelPermalink }}"></script>
<script type="module">
    var douban = new DoubanCard('{{ $id }}', '{{ $url }}', '{{ $type }}');
    var model = douban.fetchData()
    douban.render(model)
</script>