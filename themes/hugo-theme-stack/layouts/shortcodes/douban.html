{{ $id := (.Get "id") }}
{{ $type := (.Get "type") }}
{{ $url := cond (eq $type "movie") (printf "https://api.wmdb.tv/movie/api?id=%s" $id) (printf "https://douban.edui.fun/v2/book/id/%s" $id)}}
{{- $opts := dict "minify" hugo.IsProduction -}}
{{- $doubanScript := resources.Get "ts/douban.ts" | js.Build $opts -}}
<script type="text/javascript" src="{{ $doubanScript.RelPermalink }}"></script>
<script type="text/javascript">
    var ele = document.currentScript
    var douban = window.DoubanCard(ele, '{{ $id }}', '{{ $url }}', '{{ $type }}');
</script>